contract_meta:
  id: sec_001_secrets
  version: 1
  created_from: "docs/spec.md Section 2.1"
  owner: "Gemini Architect"

non_negotiable_rules:
  - id: sec_001_pat_storage
    title: "Secrets isolation: PAT stored in storage.local, accessed only by background"
    scope:
      - "packages/extension/src/content/**/*.ts"
      - "packages/extension/src/content/**/*.tsx"
    behavior_spec:
      forbidden_patterns:
        - pattern: /chrome\.storage\.local\.get.*['"]pat['"]/
          message: "Content scripts must NOT read PAT directly. Ask background."
        - pattern: /console\.log.*pat/i
          message: "NEVER log the Personal Access Token."

compliance_checklist:
  before_modifying_file:
    - question: "Am I exposing the PAT to the DOM?"
      if_yes: "STOP. Security violation."
